generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model User {
  id         String     @id @default(uuid()) @db.Uuid
  googleId   String     @unique @map("google_id")
  email      String
  name       String?
  picture    String?
  dailyLimit Int        @default(3) @map("daily_limit")
  createdAt  DateTime   @default(now()) @map("created_at") @db.Timestamptz
  documents  Document[]

  @@map("users")
}

model Document {
  id           String   @id @default(uuid()) @db.Uuid
  userId       String   @map("user_id") @db.Uuid
  filename     String
  outputPath   String?  @map("output_path")
  status       String   @default("pending")
  pageCount    Int?     @map("page_count")
  problemCount Int?     @map("problem_count")
  errorMessage String?  @map("error_message")
  createdAt    DateTime @default(now()) @map("created_at") @db.Timestamptz
  user         User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("documents")
}
